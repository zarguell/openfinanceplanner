---
phase: 13-architecture-testing-foundation
plan: 02
type: execute
wave: 2
depends_on: [13-01]
files_modified:
  - eslint.config.mjs
  - .prettierrc
  - .prettierignore
  - package.json
autonomous: true

must_haves:
  truths:
    - 'npm run lint runs ESLint without errors'
    - 'npm run format formats files with Prettier'
    - 'ESLint and Prettier do not conflict (no dueling rules)'
  artifacts:
    - path: 'eslint.config.mjs'
      provides: 'ESLint v9 flat config with TypeScript and React rules'
      contains: ['typescript-eslint', 'eslint-plugin-react']
    - path: '.prettierrc'
      provides: 'Prettier configuration'
      contains: ['semi', 'trailingComma', 'singleQuote']
    - path: 'package.json'
      provides: 'Lint and format scripts'
      contains: ['"lint"', '"format"']
  key_links:
    - from: 'eslint.config.mjs'
      to: 'tsconfig.json'
      via: 'typescript-eslint parser'
      pattern: 'parserOptions.*tsconfigRootDir'
    - from: 'eslint.config.mjs'
      to: '.prettierrc'
      via: 'eslint-config-prettier integration'
      pattern: 'prettier.*overrides'
---

<objective>
Configure ESLint v9 flat config with TypeScript, React support, and Prettier integration.

Purpose: Establishes code quality tooling with ESLint v9's modern flat config format. Prettier integration prevents dueling formatting rules. This foundation enables consistent code style enforcement before folder structure is added in 13-04.

Output: Working lint and format commands with ESLint flat config and Prettier integration.
</objective>

<execution_context>
@/Users/zach/.claude/get-shit-done/workflows/execute-plan.md
@/Users/zach/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/phases/13-architecture-testing-foundation/13-RESEARCH.md
@.planning/phases/13-architecture-testing-foundation/13-01-SUMMARY.md

Research reference: Pattern 5 (ESLint flat config), Anti-Patterns (ESLint + Prettier conflicts).
</context>

<tasks>

<task type="auto">
  <name>Install ESLint and Prettier dependencies</name>
  <files>
    package.json
    pnpm-lock.yaml
  </files>
  <action>
    Install ESLint v9 with flat config support, TypeScript ESLint, React plugins, and Prettier:

    ```bash
    npm install -D eslint @eslint/js typescript-eslint eslint-plugin-react eslint-plugin-react-hooks eslint-config-prettier prettier
    ```

    Package breakdown:
    - @eslint/js - Base JS recommended rules (ESLint v9)
    - typescript-eslint - Unified TypeScript ESLint package (v8+, flat config)
    - eslint-plugin-react - React-specific linting rules
    - eslint-plugin-react-hooks - React Hooks rules of hooks enforcement
    - eslint-config-prettier - Disables ESLint rules that conflict with Prettier
    - prettier - Code formatter

    DO NOT install deprecated packages:
    - @typescript-eslint/parser (use typescript-eslint instead)
    - @typescript-eslint/eslint-plugin (use typescript-eslint instead)

  </action>
  <verify>
    ```bash
    grep -E '"eslint"|"typescript-eslint"|"prettier"' package.json
    ```
    All packages should be in devDependencies.
  </verify>
  <done>
    ESLint, TypeScript ESLint, React plugins, and Prettier installed in devDependencies.
  </done>
</task>

<task type="auto">
  <name>Create ESLint flat config with TypeScript and React</name>
  <files>
    eslint.config.mjs
  </files>
  <action>
    Create eslint.config.mjs in project root with ESLint v9 flat config format:

    ```javascript
    import eslint from '@eslint/js'
    import tseslint from 'typescript-eslint'
    import pluginReact from 'eslint-plugin-react'
    import pluginReactHooks from 'eslint-plugin-react-hooks'
    import prettier from 'eslint-config-prettier'

    export default [
      // Base JS recommended rules
      eslint.configs.recommended,

      // TypeScript recommended rules
      ...tseslint.configs.recommended,

      {
        // React and JSX settings
        settings: { react: { version: 'detect' } },
        plugins: {
          react: pluginReact,
          'react-hooks': pluginReactHooks,
        },
        rules: {
          ...pluginReact.configs.recommended.rules,
          ...pluginReactHooks.configs.recommended.rules,
        },
      },

      {
        languageOptions: {
          parserOptions: {
            projectService: true,
            tsconfigRootDir: import.meta.dirname,
          },
        },
      },

      {
        ignores: ['dist', 'node_modules', 'coverage', '*.config.js', '*.config.ts'],
      },

      // Prettier must be LAST to disable conflicting ESLint rules
      prettier,
    ]
    ```

    CRITICAL: prettier config must be LAST to override other configs.

    DO NOT use legacy .eslintrc.js format (deprecated in ESLint v9).

  </action>
  <verify>
    ```bash
    npx eslint . --max-warnings=0
    ```
    Should run without errors (may have warnings in default Vite template files, that's OK).
  </verify>
  <done>
    eslint.config.mjs exists with flat config format, TypeScript and React rules enabled, Prettier integration at end.
  </done>
</task>

<task type="auto">
  <name>Create Prettier configuration and add scripts</name>
  <files>
    .prettierrc
    .prettierignore
    package.json
  </files>
  <action>
    Create .prettierrc in project root with sensible defaults:

    ```json
    {
      "semi": true,
      "trailingComma": "es5",
      "singleQuote": true,
      "printWidth": 80,
      "tabWidth": 2,
      "useTabs": false
    }
    ```

    Create .prettierignore to skip unnecessary files:
    ```
    node_modules
    dist
    coverage
    .next
    build
    *.lock
    package-lock.json
    pnpm-lock.yaml
    ```

    Add lint and format scripts to package.json:

    ```json
    "scripts": {
      "dev": "vite",
      "build": "tsc && vite build",
      "preview": "vite preview",
      "lint": "eslint .",
      "lint:fix": "eslint . --fix",
      "format": "prettier --write .",
      "format:check": "prettier --check ."
    }
    ```

    DO NOT modify existing dev/build/preview scripts.

  </action>
  <verify>
    ```bash
    npm run lint
    npm run format:check
    ```
    Both commands should run without errors.
  </verify>
  <done>
    .prettierrc and .prettierignore exist, package.json has lint and format scripts that execute successfully.
  </done>
</task>

</tasks>

<verification>
Overall Phase 13 Verification (after all plans complete):

1. Run `npm run lint` - verify ESLint runs with flat config
2. Run `npm run format:check` - verify Prettier config works
3. Verify ESLint and Prettier don't conflict (run lint:fix then format:check)
   </verification>

<success_criteria>

1. `npm run lint` executes ESLint with flat config (no .eslintrc errors)
2. `npm run lint:fix` auto-fixes linting issues
3. `npm run format` formats files with Prettier
4. `npm run format:check` verifies formatting (CI-friendly)
5. ESLint and Prettier don't conflict (no dueling formatting rules)
   </success_criteria>

<output>
After completion, create `.planning/phases/13-architecture-testing-foundation/13-02-SUMMARY.md` with:
- ESLint flat config details (rules enabled)
- Prettier configuration used
- Confirmation that lint and format commands work
</output>
