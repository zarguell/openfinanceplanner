---
phase: 16-ui-framework-components
plan: 03
type: execute
wave: 2
depends_on: ["16-01"]
files_modified:
  - src/components/ui/ProjectionTable.tsx
  - src/components/ui/index.ts
  - src/App.tsx
autonomous: true

must_haves:
  truths:
    - "Table displays year-by-year projection data on desktop"
    - "Table transforms to card layout on mobile screens (< 768px)"
    - "Each row shows year, age, starting balance, growth, spending, ending balance"
    - "Formatted currency values use NumberFormatter component"
  artifacts:
    - path: "src/components/ui/ProjectionTable.tsx"
      provides: "Responsive table with mobile card view transformation"
      exports: ["ProjectionTable"]
      min_lines: 50
    - path: "src/components/ui/index.ts"
      provides: "UI component barrel exports"
      exports: ["ProjectionTable"]
  key_links:
    - from: "src/components/ui/ProjectionTable.tsx"
      to: "@/core/types"
      via: "SimulationResult type import"
      pattern: "SimulationResult"
    - from: "src/components/ui/ProjectionTable.tsx"
      to: "@mantine/core"
      via: "Table and NumberFormatter components"
      pattern: "Table.*NumberFormatter"
---

<objective>
Implement a responsive projection table that displays as standard table rows on desktop and transforms to card layout on mobile devices.

Purpose: Display year-by-year financial projection data in a mobile-friendly format. Users can view their projection results on any device.

Output: ProjectionTable component with CSS-based table-to-card transformation for mobile.
</objective>

<execution_context>
@/Users/zach/.claude/get-shit-done/workflows/execute-plan.md
@/Users/zach/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-ui-framework-components/16-RESEARCH.md

# Existing codebase patterns
@/Users/zach/localcode/openfinanceplanner/src/core/types/index.ts
@/Users/zach/localcode/openfinanceplanner/src/components/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ProjectionTable component with responsive CSS</name>
  <files>src/components/ui/ProjectionTable.tsx</files>
  <action>
    Create src/components/ui/ProjectionTable.tsx:

    ```typescript
    import { Table, NumberFormatter, Box } from '@mantine/core';
    import type { SimulationResult } from '@/core/types';

    interface ProjectionTableProps {
      data: SimulationResult[];
    }

    export function ProjectionTable({ data }: ProjectionTableProps) {
      if (data.length === 0) {
        return null;
      }

      return (
        <Box
          sx={(theme) => ({
            // Mobile-first table-to-card transformation
            '@media (max-width: 768px)': {
              '& table, & thead, & tbody, & th, & td, & tr': {
                display: 'block',
              },
              '& thead tr': {
                position: 'absolute',
                top: '-9999px',
                left: '-9999px',
              },
              '& tr': {
                marginBottom: theme.spacing.md,
                border: `1px solid ${theme.colors.gray[3]}`,
                borderRadius: theme.radius.md,
                padding: theme.spacing.sm,
                display: 'block',
              },
              '& td': {
                border: 'none',
                borderBottom: `1px solid ${theme.colors.gray[3]}`,
                position: 'relative',
                paddingLeft: '50%',
                textAlign: 'left',
                display: 'block',
                padding: '0.5rem 0.5rem 0.5rem 50%',
              },
              '& td:before': {
                position: 'absolute',
                top: '0.5rem',
                left: '0.5rem',
                width: '45%',
                paddingRight: '0.5rem',
                whiteSpace: 'nowrap',
                fontWeight: 700,
                content: 'attr(data-label)',
                color: theme.colors.gray[7],
              },
              '& td:last-child': {
                borderBottom: 'none',
              },
            },
          })}
        >
          <Table striped highlightOnHover withTableBorder>
            <Table.Thead>
              <Table.Tr>
                <Table.Th>Year</Table.Th>
                <Table.Th>Age</Table.Th>
                <Table.Th>Starting</Table.Th>
                <Table.Th>Growth</Table.Th>
                <Table.Th>Spending</Table.Th>
                <Table.Th>Ending</Table.Th>
              </Table.Tr>
            </Table.Thead>
            <Table.Tbody>
              {data.map((row) => (
                <Table.Tr key={row.year}>
                  <Table.Td data-label="Year">{row.year}</Table.Td>
                  <Table.Td data-label="Age">{row.age}</Table.Td>
                  <Table.Td data-label="Starting">
                    <NumberFormatter
                      prefix="$ "
                      value={row.startingBalance}
                      thousandSeparator
                    />
                  </Table.Td>
                  <Table.Td data-label="Growth">
                    <NumberFormatter
                      prefix="$ "
                      value={row.growth}
                      thousandSeparator
                    />
                  </Table.Td>
                  <Table.Td data-label="Spending">
                    <NumberFormatter
                      prefix="$ "
                      value={row.spending}
                      thousandSeparator
                    />
                  </Table.Td>
                  <Table.Td data-label="Ending">
                    <NumberFormatter
                      prefix="$ "
                      value={row.endingBalance}
                      thousandSeparator
                    />
                  </Table.Td>
                </Table.Tr>
              ))}
            </Table.Tbody>
          </Table>
        </Box>
      );
    }
    ```

    NOTES per RESEARCH.md Pattern 5:
    - Uses custom CSS media query for table-to-card transformation (@media max-width: 768px)
    - Each td has data-label attribute for mobile card labels (via CSS content: attr(data-label))
    - NumberFormatter component formats currency with prefix and thousandSeparator
    - On mobile: table rows become cards, headers hidden, cells show label-value pairs
    - On desktop: standard table with striped rows and hover effect

    This approach was chosen over variant="vertical" because we need multi-row data display, not key-value pairs.
  </action>
  <verify>cat src/components/ui/ProjectionTable.tsx | grep -q "ProjectionTable"</verify>
  <done>ProjectionTable component with responsive CSS for table-to-card transformation</done>
</task>

<task type="auto">
  <name>Task 2: Create UI barrel export and update components index</name>
  <files>src/components/ui/index.ts, src/components/index.ts</files>
  <action>
    1. Create src/components/ui/index.ts:
       ```typescript
       export { ProjectionTable } from './ProjectionTable';
       ```

    2. Update src/components/index.ts:
       ```typescript
       /**
        * React UI components for the Open Finance Planner.
        */

       export * from './forms';
       export * from './ui';
       ```

    Maintain namespace export pattern for clean imports.
  </action>
  <verify>cat src/components/ui/index.ts | grep -q "ProjectionTable"</verify>
  <done>UI components exported via barrel files, accessible from @/components</done>
</task>

<task type="auto">
  <name>Task 3: Integrate ProjectionTable into App.tsx with sample data</name>
  <files>src/App.tsx</files>
  <action>
    Update src/App.tsx to include ProjectionTable with sample data:

    ```typescript
    import '@mantine/core/styles.css';
    import { MantineProvider, Container, Stack, Title, Text, Paper } from '@mantine/core';
    import { ProfileForm } from './components/forms';
    import { ProjectionTable } from './components/ui';

    // Sample data for demonstration - will be replaced with store integration in Phase 17
    const sampleData = [
      {
        year: 0,
        age: 35,
        startingBalance: 100000,
        growth: 7000,
        spending: 50000,
        endingBalance: 57000,
      },
      {
        year: 1,
        age: 36,
        startingBalance: 57000,
        growth: 3990,
        spending: 50000,
        endingBalance: 10990,
      },
      {
        year: 2,
        age: 37,
        startingBalance: 10990,
        growth: 769.30,
        spending: 50000,
        endingBalance: 0,
      },
    ];

    function App() {
      return (
        <MantineProvider defaultColorScheme="light">
          <Container size={{ base: 'xs', sm: 'md', md: 'lg' }} p={{ base: 'sm', md: 'xl' }}>
            <Stack gap="xl">
              <Stack gap="xs">
                <Title order={1}>Open Finance Planner</Title>
                <Text c="dimmed">
                  Privacy-first financial projections. Your data stays on your device.
                </Text>
              </Stack>

              <ProfileForm />

              {sampleData.length > 0 && (
                <>
                  <Title order={2}>Projection Results</Title>
                  <Paper shadow="xs" p="md" withBorder>
                    <ProjectionTable data={sampleData} />
                  </Paper>
                </>
              )}
            </Stack>
          </Container>
        </MantineProvider>
      );
    }

    export default App;
    ```

    Sample data demonstrates table functionality. In Phase 17, this will connect to Zustand store with real projection data.
  </action>
  <verify>grep -q "ProjectionTable" src/App.tsx</verify>
  <done>ProjectionTable rendered in App with sample data, responsive layout confirmed</done>
</task>

</tasks>

<verification>
1. Run `npm run dev` - development server starts
2. Visit http://localhost:5173 - Table renders with 3 rows of sample data
3. Desktop view (> 768px):
   - Table displays as standard rows with columns
   - Headers visible (Year, Age, Starting, Growth, Spending, Ending)
   - Striped rows and hover effect working
   - Currency values formatted with $ and commas
4. Mobile view (< 768px):
   - Resize browser window to mobile size
   - Table transforms to card layout
   - Headers hidden
   - Each row becomes a card with label-value pairs
   - Labels appear on left (bold), values on right
5. Check all cells have proper data-label attributes for mobile transformation
6. Run `npm run type-check` - TypeScript compilation succeeds
</verification>

<success_criteria>
1. ProjectionTable component accepts SimulationResult[] data prop
2. Table displays 6 columns: Year, Age, Starting Balance, Growth, Spending, Ending Balance
3. Currency values formatted using NumberFormatter with $ prefix and commas
4. CSS media query transforms table to card layout at 768px breakpoint
5. Each td has data-label attribute for mobile card labels
6. Component handles empty data array (returns null)
7. No TypeScript or runtime errors
8. Sample data in App.tsx demonstrates functionality
</success_criteria>

<output>
After completion, create `.planning/phases/16-ui-framework-components/16-03-SUMMARY.md`
</output>
